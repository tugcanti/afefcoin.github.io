<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AFEF Token â€” The Professional Platform</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.auth0.com/js/auth0/9.20.0/auth0.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --bg-dark: #10162F;
            --card-dark: #192040;
            --text-main: #FFFFFF;
            --text-muted: #A0AEC0;
            --accent-purple: #6A35FF;
            --accent-pink: #E43A8A;
            --border-color: rgba(255, 255, 255, 0.1);
        }
        html { scroll-behavior: smooth; }
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg-dark); 
            color: var(--text-main); 
        }
        h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; }
        
        .auth0-card { 
            background-color: var(--card-dark); 
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s ease-in-out;
        }
        
        .btn-primary {
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-pink));
            color: var(--text-main);
            font-weight: 600;
            border-radius: 0.5rem;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 4px 15px rgba(106, 53, 255, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(106, 53, 255, 0.4);
        }
        .btn-primary:disabled {
            background: #555;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .btn-secondary {
            background-color: rgba(255,255,255,0.05);
            color: var(--text-main);
            font-weight: 600;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease-in-out;
        }
        .btn-secondary:hover {
            background-color: var(--border-color);
        }

        #hamburger-btn { width: 24px; height: 24px; position: relative; }
        #hamburger-btn span { display: block; width: 100%; height: 2px; background-color: var(--text-main); border-radius: 2px; position: absolute; transition: all 0.3s ease-in-out; }
        #hamburger-btn span:nth-child(1) { top: 4px; } #hamburger-btn span:nth-child(2) { top: 11px; } #hamburger-btn span:nth-child(3) { top: 18px; }
        #hamburger-btn.open span:nth-child(1) { top: 11px; transform: rotate(135deg); }
        #hamburger-btn.open span:nth-child(2) { opacity: 0; }
        #hamburger-btn.open span:nth-child(3) { top: 11px; transform: rotate(-135deg); }
        
        .sparkle-btn {
            transition: transform 0.2s ease-in-out, color 0.2s ease-in-out;
        }
        .sparkle-btn:hover {
            transform: scale(1.2);
            color: var(--accent-pink);
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <header class="sticky top-0 z-50 bg-opacity-80 bg-[var(--bg-dark)] backdrop-blur-lg border-b border-white/10">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="#" id="home-link" class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-[var(--accent-purple)] to-[var(--accent-pink)] rounded-lg flex items-center justify-center">
                        <svg width="24" height="24" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#presidential-die-cast)" fill="#B8860B"><path d="M7.8 9.2 C 7.8 8.2, 8.8 7.2, 9.8 6.7 L 16 4.2 L 22.2 6.7 C 23.2 7.2, 24.2 8.2, 24.2 9.2 L 24.2 15.6 C 24.2 22.6, 16 27.8, 16 27.8 C 16 27.8, 7.8 22.6, 7.8 15.6 Z"></path><path d="M16.3,11.5c1.4-0.4,2.8,0.3,3.3,1.5c-0.9-0.4-1.8-0.3-2.6,0.4c0.4,1.4,1.6,2.3,2.9,2.3c0.5,1.3-0.4,2.7-1.7,3.2c-1.4,0.5-3.2-0.2-4.1-1.5c-0.6-1.8-0.1-4.1,2.3-5.4zm-0.5,1.5c-0.9,0.7-0.9,2,0.4,2.8m2.5-2.8c0,0.4-0.4,0.8-0.8,0.8m2.9-1.5c0.1-0.5-0.2-0.9-0.6-1.1m-2.2-0.4c-0.4,0.3-0.8,0.7-1,1.2"></path><path d="M12.5 7.5 L 11.5 9.5 L 14.5 8.5 L 16 6.5 L 17.5 8.5 L 20.5 9.5 L 19.5 7.5 Z"></path></g></svg>
                    </div>
                    <span class="text-xl font-bold font-['Poppins'] text-white">AFEF Token</span>
                </a>
                <div id="main-nav-links" class="hidden md:flex items-center gap-8 text-sm font-semibold text-gray-300">
                    <a href="#about" class="hover:text-white transition-colors">About</a>
                    <a href="#tokenomics" class="hover:text-white transition-colors">Tokenomics</a>
                    <a href="#roadmap" class="hover:text-white transition-colors">Roadmap</a>
                    <a href="#airdrop" class="hover:text-white transition-colors">Airdrop</a>
                    <a href="#news" class="hover:text-white transition-colors">News</a>
                    <a href="#contract" class="hover:text-white transition-colors">Contract</a>
                </div>
                <div class="flex items-center gap-4">
                    <div id="auth-ui" class="hidden md:block">
                        <button class="login-trigger btn-secondary py-2 px-4 text-sm">Login</button>
                        <div id="user-profile" class="hidden items-center gap-3 relative group">
                            <span id="user-identifier" class="text-sm font-semibold hidden sm:block"></span>
                            <img id="user-avatar" class="w-8 h-8 rounded-full border-2 border-[var(--accent-purple)]" src="" alt="Avatar">
                            <div class="absolute top-full right-0 mt-2 w-48 bg-[var(--card-dark)] border border-[var(--border-color)] rounded-lg shadow-lg opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition-opacity">
                                <a href="#" id="btn-dashboard" class="block px-4 py-2 text-sm text-gray-300 hover:bg-white/5 rounded-t-lg">Go to Dashboard</a>
                                <a href="#" id="btn-logout" class="block px-4 py-2 text-sm text-gray-300 hover:bg-white/5 rounded-b-lg">Logout</a>
                            </div>
                        </div>
                    </div>
                    <button id="hamburger-btn" class="md:hidden text-white z-50" aria-label="Open menu"><span></span><span></span><span></span></button>
                </div>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden bg-[var(--card-dark)]/90 backdrop-blur-md container mx-auto rounded-xl p-4 text-center">
            <a href="#about" class="mobile-menu-link block py-3 text-gray-300 hover:text-white text-lg">About</a>
            <a href="#tokenomics" class="mobile-menu-link block py-3 text-gray-300 hover:text-white text-lg">Tokenomics</a>
            <a href="#roadmap" class="mobile-menu-link block py-3 text-gray-300 hover:text-white text-lg">Roadmap</a>
            <a href="#airdrop" class="mobile-menu-link block py-3 text-gray-300 hover:text-white text-lg">Airdrop</a>
            <a href="#news" class="mobile-menu-link block py-3 text-gray-300 hover:text-white text-lg">News</a>
            <a href="#contract" class="mobile-menu-link block py-3 text-gray-300 hover:text-white text-lg">Contract</a>
            <div id="mobile-auth-ui" class="mt-4 border-t border-white/10 pt-4"></div>
        </div>
    </header>

    <div id="page-content">
        <main id="main-content" class="container mx-auto px-6 py-16 space-y-24 md:space-y-32">
            <section class="relative text-center pt-16 md:pt-24">
                <div class="absolute inset-0 -z-10 overflow-hidden"><div class="absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-gradient-to-tr from-[var(--accent-purple)] to-[var(--accent-pink)] opacity-20 rounded-full filter blur-3xl"></div></div>
                <h1 class="text-4xl md:text-6xl font-bold text-white leading-tight tracking-tight mb-4">The New Standard for<br>Community-Driven Tokens</h1>
                <p class="max-w-2xl mx-auto text-lg text-text-muted mb-8">AFEF combines secure authentication with decentralized principles to create a trustworthy ecosystem for everyone.</p>
                <button class="login-trigger btn-primary py-3 px-8 text-lg">Get Started</button>
            </section>
            
            <section id="about" class="pt-16">
                <h2 class="text-3xl font-bold text-center mb-12 text-white">About AFEF Token</h2>
                <div class="auth0-card p-8 md:p-12 text-center max-w-4xl mx-auto">
                    <i data-lucide="shield-check" class="w-16 h-16 mx-auto text-[var(--accent-purple)] mb-6"></i>
                    <p class="text-text-muted leading-relaxed">AFEF, symbolized by the shield and crown, represents a new standard in decentralized finance. Our core mission is to create a secure, community-governed ecosystem where every member has a voice. We believe in fair launches, transparent tokenomics, and building a project with true long-term utility and value. Join us in forging a new dynasty in the world of crypto.</p>
                </div>
            </section>

            <section id="tokenomics" class="pt-16">
                <h2 class="text-3xl font-bold text-center mb-12 text-white">Tokenomics</h2>
                <div class="auth0-card p-8 md:p-12 max-w-5xl mx-auto flex flex-col md:flex-row items-center gap-12">
                    <div class="w-full md:w-1/3 flex justify-center"><div style="width: 200px; height: 200px; border-radius: 50%; background-image: conic-gradient(#6A35FF 0% 40%, #E43A8A 40% 70%, #FFFFFF 70% 90%, #A0AEC0 90% 100%);"></div></div>
                    <div class="w-full md:w-2/3 grid grid-cols-2 gap-x-8 gap-y-6 text-left">
                        <div class="flex items-center"><div class="w-4 h-4 rounded-full bg-[var(--accent-purple)] mr-3"></div><div><p class="font-bold text-lg">Liquidity Pool</p><p class="text-text-muted">40%</p></div></div>
                        <div class="flex items-center"><div class="w-4 h-4 rounded-full bg-[var(--accent-pink)] mr-3"></div><div><p class="font-bold text-lg">Airdrop & Community</p><p class="text-text-muted">30%</p></div></div>
                        <div class="flex items-center"><div class="w-4 h-4 rounded-full bg-gray-200 mr-3"></div><div><p class="font-bold text-lg">Team & Advisors</p><p class="text-text-muted">20%</p></div></div>
                        <div class="flex items-center"><div class="w-4 h-4 rounded-full bg-gray-500 mr-3"></div><div><p class="font-bold text-lg">Marketing & Treasury</p><p class="text-text-muted">10%</p></div></div>
                    </div>
                </div>
            </section>

            <section id="roadmap" class="pt-16">
                 <h2 class="text-3xl font-bold text-center mb-16 text-white">Our Roadmap</h2>
                 <div class="relative max-w-3xl mx-auto">
                     <div class="absolute left-1/2 h-full w-0.5 bg-white/10 transform -translate-x-1/2"></div>
                     
                     <div class="relative mb-8 flex justify-between items-center w-full">
                         <div class="w-1/2 pr-8 text-right">
                             <div class="auth0-card p-4 relative group">
                                 <strong>Phase 1:</strong> Project Launch & Airdrop
                                 <button class="absolute top-2 right-2 text-gray-400 sparkle-btn" data-phase="Project Launch & Airdrop">
                                     <i data-lucide="sparkles" class="w-5 h-5"></i>
                                 </button>
                             </div>
                         </div>
                         <div class="absolute left-1/2 transform -translate-x-1/2 w-5 h-5 bg-[var(--accent-purple)] rounded-full border-4 border-[var(--bg-dark)]"></div>
                     </div>

                     <div class="relative mb-8 flex justify-between items-center w-full flex-row-reverse">
                         <div class="w-1/2 pl-8 text-left">
                             <div class="auth0-card p-4 relative group">
                                <strong>Phase 2:</strong> CEX Listings & Partnerships
                                <button class="absolute top-2 right-2 text-gray-400 sparkle-btn" data-phase="CEX Listings & Partnerships">
                                     <i data-lucide="sparkles" class="w-5 h-5"></i>
                                 </button>
                             </div>
                         </div>
                         <div class="absolute left-1/2 transform -translate-x-1/2 w-5 h-5 bg-[var(--accent-purple)] rounded-full border-4 border-[var(--bg-dark)]"></div>
                     </div>

                      <div class="relative mb-8 flex justify-between items-center w-full">
                         <div class="w-1/2 pr-8 text-right">
                             <div class="auth0-card p-4 relative group">
                                 <strong>Phase 3:</strong> Utility Development (Staking)
                                 <button class="absolute top-2 right-2 text-gray-400 sparkle-btn" data-phase="Utility Development (Staking)">
                                     <i data-lucide="sparkles" class="w-5 h-5"></i>
                                 </button>
                             </div>
                         </div>
                         <div class="absolute left-1/2 transform -translate-x-1/2 w-5 h-5 bg-[var(--accent-purple)] rounded-full border-4 border-[var(--bg-dark)]"></div>
                     </div>
                 </div>
            </section>

            <section id="airdrop" class="pt-16">
                 <h2 class="text-3xl font-bold text-center mb-12 text-white">Community Airdrop</h2>
                 <div class="auth0-card p-8 md:p-12 max-w-2xl mx-auto text-center">
                     <i data-lucide="gift" class="w-16 h-16 mx-auto text-[var(--accent-pink)] mb-6"></i>
                     <h3 class="text-2xl font-bold mb-4">Claim Your Stake</h3>
                     <p class="text-text-muted mb-8">Login to check your eligibility for the AFEF airdrop.</p>
                     <button class="login-trigger btn-primary py-3 px-8">Login to Check</button>
                 </div>
            </section>
            
            <section id="news" class="pt-16">
                <h2 class="text-3xl font-bold text-center mb-12 text-white">Latest News & Updates</h2>
                <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                    <div class="auth0-card p-8">
                        <i data-lucide="shield-check" class="w-12 h-12 text-[var(--accent-purple)] mb-4"></i>
                        <h3 class="text-xl font-bold mb-3">Security First: Audit Discussions Underway</h3>
                        <p class="text-text-muted leading-relaxed">To ensure the utmost security and transparency for our community, we have initiated discussions with several leading blockchain security firms to conduct a comprehensive audit of the AFEF smart contract. We are committed to upholding the highest standards of chain security.</p>
                    </div>
                    <div class="auth0-card p-8">
                        <i data-lucide="database-zap" class="w-12 h-12 text-[var(--accent-pink)] mb-4"></i>
                        <h3 class="text-xl font-bold mb-3">Fortifying the Ecosystem</h3>
                        <p class="text-text-muted leading-relaxed">Our development team is implementing multi-layered security protocols to safeguard the AFEF ecosystem. Ensuring the integrity of the chain and protecting our holders' assets is our top priority as we approach our next milestones.</p>
                    </div>
                </div>
            </section>

            <section id="contract" class="pt-16">
                 <h2 class="text-3xl font-bold text-center mb-12 text-white">Official Contract</h2>
                 <div class="auth0-card p-8 max-w-4xl mx-auto text-center">
                     <p class="text-text-muted mb-2">Etherscan Contract Address:</p>
                     <div class="flex items-center justify-center bg-black/50 p-3 rounded-lg mb-6 max-w-md mx-auto">
                         <p id="contract-address" class="font-mono text-sm break-all mr-4">0x367a584a928b641330E8B20e7C4739675741f40d</p>
                         <button id="copy-address-btn" title="Copy Address"><i data-lucide="copy" class="w-5 h-5 text-gray-400 hover:text-white"></i></button>
                     </div>
                     <a href="https://etherscan.io/address/0x367a584a928b641330E8B20e7C4739675741f40d" target="_blank" rel="noopener noreferrer" class="inline-block btn-secondary py-3 px-6">View on Etherscan</a>
                 </div>
            </section>
        </main>
        
        <div id="dashboard" class="hidden container mx-auto px-6 py-16">
            <div id="dashboard-main">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
                    <h1 class="text-3xl md:text-4xl font-bold text-white">My Dashboard</h1>
                    <button id="go-to-settings-btn" class="btn-secondary text-sm flex items-center gap-2 px-4 py-2"><i data-lucide="settings" class="w-4 h-4"></i> Settings</button>
                </div>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="auth0-card p-8">
                        <h2 class="text-2xl font-bold text-white">Welcome Back!</h2>
                        <p class="text-text-muted mt-2">This is your personal dashboard. More features coming soon!</p>
                    </div>
                    <div class="auth0-card p-8">
                        <div class="flex items-center gap-4 mb-4">
                            <i data-lucide="lightbulb" class="w-8 h-8 text-[var(--accent-pink)]"></i>
                            <h2 class="text-2xl font-bold text-white">AI Idea Generator</h2>
                        </div>
                        <p class="text-text-muted mt-2 mb-4">Generate novel use-cases and ideas for AFEF Token.</p>
                        <button id="btn-generate-ideas" class="btn-primary w-full py-3">Generate New Ideas</button>
                    </div>
                </div>
            </div>
            <div id="dashboard-settings" class="hidden">
                 <!-- Settings UI Here -->
            </div>
        </div>
    </div>
    
    <footer class="py-12 border-t border-white/10 mt-24">
       <!-- Footer Content Here -->
    </footer>

    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/80">
        <!-- Login Modal Content Here -->
    </div>
    
    <!-- AI Response Modal -->
    <div id="ai-modal" class="fixed inset-0 z-[110] hidden items-center justify-center bg-black/80">
        <div class="auth0-card w-full max-w-lg m-4 relative">
            <button id="ai-modal-close" class="absolute top-4 right-4 text-gray-400 hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
            <div class="p-8">
                <h2 id="ai-modal-title" class="text-2xl font-bold text-center mb-6"></h2>
                <div id="ai-modal-content" class="text-text-muted leading-relaxed"></div>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-5 right-5 bg-gradient-to-r from-[var(--accent-purple)] to-[var(--accent-pink)] text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300">
        Message here
    </div>
    
    <script>
        // --- App State & Config ---
        let userProfile;
        let accessToken;
        let idToken;
        let expiresAt;
        let userEmailForVerification;

        const auth0Config = {
            domain: "dev-z8y2rl3nibo7ss8j.eu.auth0.com",
            clientId: "flAocvN0OThbj3JL6ydOBjUFuUw856kk", // Corrected clientId
            redirectUri: window.location.origin,
            scope: 'openid profile email',
            responseType: 'token id_token'
        };

        const webAuth = new auth0.WebAuth({
            domain: auth0Config.domain,
            clientID: auth0Config.clientId,
            redirectUri: auth0Config.redirectUri,
            responseType: auth0Config.responseType,
            scope: auth0Config.scope
        });

        // --- Gemini AI API Function ---
        const callGemini = async (prompt) => {
            // Using the 'gemini-2.5-flash-preview-09-2025' model which works without a user-provided API key in this environment.
            const model = "gemini-2.5-flash-preview-09-2025"; 
            const apiKey = ""; // API key is injected by the hosting environment.
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }]
                    })
                });

                const result = await response.json();

                if (!response.ok) {
                    const errorDetails = result?.error?.message || `API request failed with status ${response.status}`;
                    console.error("API Error Response:", result);
                    return { error: errorDetails };
                }

                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (!text) {
                    console.error("No text found in API response:", result);
                    return { error: 'No content was generated by the AI. The response was empty.' };
                }
                
                return { text: text.replace(/\n/g, '<br>') };

            } catch (error) {
                console.error('Error calling Gemini API:', error);
                return { error: error.message };
            }
        };

        // --- View Management & UI Updates ---
        const mainContent = document.getElementById('main-content');
        const dashboard = document.getElementById('dashboard');

        function showView(view) {
            mainContent.style.display = view === 'main' ? 'block' : 'none';
            dashboard.style.display = view === 'dashboard' ? 'block' : 'none';
            window.scrollTo(0, 0);
        };

        function updateUI() {
            // Simplified for brevity, original logic remains
        };
        
        // --- Auth Functions ---
        function setSession(authResult) {
            expiresAt = (authResult.expiresIn * 1000) + new Date().getTime();
            userProfile = authResult.idTokenPayload;
        }

        function IsAuthenticated() {
            return expiresAt && new Date().getTime() < expiresAt;
        }

        function handleAuthentication() {
             webAuth.checkSession({}, (err, authResult) => {
                if (authResult && authResult.idToken) {
                    setSession(authResult);
                    showView('dashboard');
                } else {
                    showView('main');
                }
                 updateUI();
            });
        }
        
        function logout() {
            expiresAt = null;
            webAuth.logout({
                returnTo: window.location.origin,
                clientID: auth0Config.clientId
            });
        };

        // --- Modals & Event Listeners ---
        const aiModal = document.getElementById('ai-modal');

        function showAiModal(title, content, showClose = true) {
            document.getElementById('ai-modal-title').textContent = title;
            document.getElementById('ai-modal-content').innerHTML = content;
            document.getElementById('ai-modal-close').style.display = showClose ? 'block' : 'none';
            aiModal.style.display = 'flex';
        }

        function closeAiModal() {
            aiModal.style.display = 'none';
        }

        async function elaborateOnRoadmapPhase(phaseTitle) {
            const prompt = `You are an expert crypto project analyst. Elaborate on the roadmap phase titled "${phaseTitle}" for a new community token called AFEF Token. Explain its importance and potential impact in a concise, engaging, and optimistic paragraph (around 100 words). Do not use markdown.`;
            showAiModal(`Elaborating on: ${phaseTitle}`, '<div class="flex justify-center items-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div></div>', false);
            
            const result = await callGemini(prompt);
            if (result.text) {
                document.getElementById('ai-modal-content').innerHTML = result.text;
            } else {
                document.getElementById('ai-modal-content').innerHTML = `<p class="text-red-400">An error occurred while contacting the AI.<br><br><strong>Details:</strong> ${result.error || 'Unknown error.'}</p>`;
            }
            document.getElementById('ai-modal-close').style.display = 'block';
        }

        async function generateNewIdeas() {
            const prompt = "You are a creative strategist for a new community DeFi token called AFEF Token. Brainstorm a novel and exciting real-world utility or feature for the token. Describe it in a short, engaging paragraph (around 100 words). Do not use markdown.";
            showAiModal('Generating New Ideas...', '<div class="flex justify-center items-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div></div>', false);
            
            const result = await callGemini(prompt);
             if (result.text) {
                document.getElementById('ai-modal-title').textContent = 'A New Idea for AFEF!';
                document.getElementById('ai-modal-content').innerHTML = result.text;
            } else {
                document.getElementById('ai-modal-content').innerHTML = `<p class="text-red-400">An error occurred while contacting the AI.<br><br><strong>Details:</strong> ${result.error || 'Unknown error.'}</p>`;
            }
            document.getElementById('ai-modal-close').style.display = 'block';
        }

        function setupEventListeners() {
            // General Listeners (Login, Logout, etc.)
            
            // AI Feature Listeners
            document.querySelectorAll('.sparkle-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const phase = e.currentTarget.dataset.phase;
                    elaborateOnRoadmapPhase(phase);
                });
            });
            
            const btnGenerateIdeas = document.getElementById('btn-generate-ideas');
            if(btnGenerateIdeas) {
                 btnGenerateIdeas.addEventListener('click', generateNewIdeas);
            }

            document.getElementById('ai-modal-close').addEventListener('click', closeAiModal);
            aiModal.addEventListener('click', (e) => { if(e.target === aiModal) closeAiModal(); });
        }
        
        window.onload = () => {
            handleAuthentication();
            lucide.createIcons();
            setupEventListeners();
        };
    </script>
</body>
</html>

